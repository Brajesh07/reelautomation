# Astrology Reel Automation

React + Canvas based system for generating data-driven astrology reels for Instagram.

## Project Structure

```
CanvaReel/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ data.json          # Dynamic content data
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ ReelCanvas.jsx # Main canvas component with GSAP timeline
â”‚   â”œâ”€â”€ frames/
â”‚   â”‚   â”œâ”€â”€ IntroFrame.js  # Frame 1: Intro
â”‚   â”‚   â”œâ”€â”€ ZodiacFrame.js # Frames 2-4: Zodiac cards
â”‚   â”‚   â””â”€â”€ OutroFrame.js  # Frame 5: Outro/CTA
â”‚   â”œâ”€â”€ App.jsx
â”‚   â”œâ”€â”€ main.jsx
â”‚   â””â”€â”€ index.css
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ export.js          # Puppeteer + FFmpeg export script
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â””â”€â”€ astrology-reel-spec.md # Full specification
```

## Features

- **5 Frame Structure**: Intro â†’ 3 Zodiac Cards â†’ Outro
- **70 Second Duration**: Auto-timed with GSAP animations
- **Data-Driven**: All content from JSON (following [] static, {} dynamic rule)
- **Canvas Rendering**: Pure HTML5 Canvas (no DOM text)
- **Smooth Transitions**: Fade animations between frames
- **Video Export**: Automated PNG sequence â†’ MP4 conversion

## Installation

```bash
npm install
```

## Development

Start the development server:

```bash
npm run dev
```

Open http://localhost:3000 to see the reel animation.

## Editing Content

Edit `public/data.json` to change the daily content:

```json
{
  "date": "16 January 2026",
  "zodiacs": [
    {
      "name": "Scorpio",
      "vibe": "Your daily vibe message...",
      "love": "Multi-line text\nsupported with \\n",
      "career": "Career guidance...",
      "money": "Financial advice...",
      "soulMessage": "Soul message..."
    }
    // ... 2 more zodiacs
  ]
}
```

**Important**: Use `\n` for line breaks in yellow boxes.

## Exporting Video

### Method 1: Browser Canvas Recording (Recommended â­)

**The easiest way - records ONLY the canvas element at full 1080Ã—1920 resolution:**

1. **Start the dev server:**
   ```bash
   npm run dev
   ```

2. **Open http://localhost:3000** in your browser

3. **Click the "ğŸ¬ Start Recording" button** on the right side

4. **Wait 70 seconds** - the animation plays and records automatically

5. **Video downloads as WebM** - convert to MP4:
   ```bash
   ./scripts/convert-to-mp4.sh ~/Downloads/astrology-reel-*.webm
   ```

**Benefits:**
- âœ… Records only the canvas (no UI, no screen clutter)
- âœ… Perfect 1080Ã—1920 resolution
- âœ… No screen recording permissions needed
- âœ… Works on any screen setup (single/multiple monitors)

### Method 2: FFmpeg Screen Capture

The easiest automated way to export your reel:

```bash
# 1. Make sure dev server is running
npm run dev

# 2. In a new terminal, run the FFmpeg export
npm run export:ffmpeg
```

**Steps:**
1. The script will prompt you to prepare
2. Open http://localhost:3000 in your browser
3. Position the browser window to show the canvas
4. Press ENTER in the terminal
5. Immediately refresh the browser to start the animation
6. Recording captures for 70 seconds automatically
7. Video saved to `output/astrology-reel.mp4`

**Note:** On first run, macOS will ask for screen recording permission for Terminal.
Go to: System Preferences â†’ Privacy & Security â†’ Screen Recording

### Method 2: QuickTime Player (Manual)

## Content Rules

- **[Text]** = Static content (never changes)
- **{Text}** = Dynamic content (from JSON)

### Frame Timing

1. **Intro**: 6 seconds
2. **Zodiac 1**: 20 seconds
3. **Zodiac 2**: 20 seconds
4. **Zodiac 3**: 20 seconds
5. **Outro**: 4 seconds

**Total**: 70 seconds

## Customization

### Colors

Edit the frame files in `src/frames/`:
- Background: `#1a1a2e` â†’ `#0f0f1e` gradient
- Gold text: `#ffd700`
- Yellow boxes: `#ffe680`

### Fonts

Canvas uses Arial by default. To add custom fonts:
1. Add font files to `public/fonts/`
2. Load fonts in frame rendering functions
3. Update `ctx.font` declarations

### Animation Duration

Edit `src/components/ReelCanvas.jsx` to adjust timing:
- Change `duration` values in GSAP timeline
- Update `scripts/export.js` TOTAL_DURATION if needed

## Tech Stack

- **React 18** - Component framework
- **Vite** - Build tool & dev server
- **GSAP 3** - Animation timeline
- **HTML5 Canvas** - Rendering engine
- **Puppeteer** - Headless browser for capture
- **FFmpeg** - Video encoding

## Success Criteria âœ“

- [x] Daily reel generated by editing JSON only
- [x] No After Effects required
- [x] Canvas-based rendering
- [x] GSAP timeline animations
- [x] Auto-export to MP4
- [x] 9:16 vertical format (1080Ã—1920)
- [x] 70 seconds total duration
- [x] Static/dynamic content separation

## Troubleshooting

### Video export fails
- Ensure FFmpeg is installed: `ffmpeg -version`
- Check dev server is running on http://localhost:3000
- Verify `output/` directory has write permissions

### Fonts look wrong
- Canvas doesn't support web fonts by default
- Use system fonts or load fonts programmatically

### Animation timing is off
- Check GSAP timeline in ReelCanvas.jsx
- Verify total duration adds up to 70 seconds
- Update TOTAL_DURATION in export.js if changed

## Future Enhancements

- Batch generation from multiple JSON files
- Custom background images per zodiac
- Audio track integration
- Real-time preview controls
- Export progress UI

---

**License**: MIT  
**Author**: Created following astrology-reel-spec.md
